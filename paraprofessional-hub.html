<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Paraprofessional Hub | Cognitio+</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <style>
        :root {
            --primary: #b425aa; /* Deep Magenta */
            --primary-light: #c80ec9;
            --accent: #D4AF37; /* Gold */
            --bg-light: #f5f5f5;
        }
        
        /* Custom Tailwind Configuration */
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: 'var(--primary)',
                        'primary-light': 'var(--primary-light)',
                        accent: 'var(--accent)',
                        'bg-light': 'var(--bg-light)',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
        
        /* Custom Styles for better visual appeal */
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .section-heading {
            color: var(--primary);
            font-size: 2.25rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
        }

        /* Style for the post content to preserve formatting */
        .whitespace-pre-wrap {
            white-space: pre-wrap;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">

    <!-- Firebase SDK Imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, onSnapshot, collection, setDoc, serverTimestamp, query, orderBy, limit, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        setLogLevel('Debug'); // Enable Firestore logging

        // Global variables from Canvas environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        let db;
        let auth;
        let userId = null;

        // Initialize Firebase and Auth
        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);

            // Authentication Setup
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    userId = user.uid;
                    document.getElementById('user-id-display').textContent = `User ID: ${userId}`;
                    document.getElementById('auth-status').textContent = 'Authenticated';
                    initializeFirestoreListeners();
                } else {
                    // Try to sign in with custom token or anonymously
                    try {
                        if (initialAuthToken) {
                            const userCredential = await signInWithCustomToken(auth, initialAuthToken);
                            userId = userCredential.user.uid;
                        } else {
                            const userCredential = await signInAnonymously(auth);
                            userId = userCredential.user.uid;
                        }
                        // Re-run onAuthStateChanged listener to set the final state and call initializeFirestoreListeners
                    } catch (error) {
                        console.error("Firebase Auth Error:", error.message);
                        document.getElementById('auth-status').textContent = 'Auth Failed';
                        // Fallback user ID for unauthenticated state (not ideal for Hub, but for display)
                        userId = crypto.randomUUID(); 
                        document.getElementById('user-id-display').textContent = `User ID: (Anon) ${userId.substring(0, 8)}...`;
                    }
                }
            });

        } catch (e) {
            console.error("Failed to initialize Firebase:", e);
            document.getElementById('auth-status').textContent = 'Init Failed';
        }

        // Firestore Real-time Listeners
        function initializeFirestoreListeners() {
            if (!db || !userId) return;

            // 1. Listen for Hub Status Updates (Public Data)
            const statusRef = doc(db, 'artifacts', appId, 'public', 'data', 'hub_status', 'latest_update');
            onSnapshot(statusRef, (docSnapshot) => {
                const statusElement = document.getElementById('hub-status-text');
                if (docSnapshot.exists()) {
                    const data = docSnapshot.data();
                    statusElement.innerHTML = `
                        <p class="text-sm font-semibold">Active Peers: <span class="text-primary">${data.activeUsers || 0}</span></p>
                        <p class="text-xs text-gray-500 mt-1">Last Peer Check-in: ${new Date(data.lastCheckIn?.seconds * 1000).toLocaleTimeString()}</p>
                    `;
                } else {
                    statusElement.innerHTML = `<p class="text-sm text-gray-500">No recent community status found.</p>`;
                    // Initialize or simulate an update if none exists
                    updateHubStatus();
                }
            }, (error) => {
                console.error("Error fetching hub status:", error);
                document.getElementById('hub-status-text').innerHTML = `<p class="text-sm text-red-500">Error loading status.</p>`;
            });

            // 2. Simulate a check-in every 10 seconds (for public data demonstration)
            setInterval(updateHubStatus, 10000);
            
            // 3. Listen for Forum Posts
            listenForPosts();
        }
        
        // Function to update public hub status
        async function updateHubStatus() {
            if (!db || !userId) return;
            const statusRef = doc(db, 'artifacts', appId, 'public', 'data', 'hub_status', 'latest_update');
            try {
                // Simulate active users count and update check-in time
                await setDoc(statusRef, { 
                    activeUsers: Math.floor(Math.random() * 50) + 10, // Random number between 10 and 59
                    lastCheckIn: serverTimestamp(),
                    lastCheckInUserId: userId
                }, { merge: true });
            } catch (error) {
                console.error("Error updating hub status:", error);
            }
        }
        
        // New function to listen for and display forum posts
        function listenForPosts() {
            if (!db) return; // Guard clause

            const postsColRef = collection(db, 'artifacts', appId, 'public', 'data', 'forum_posts');
            // Query: Order by timestamp descending (newest first)
            const q = query(postsColRef, orderBy('timestamp', 'desc'), limit(50));
            const feedElement = document.getElementById('forum-feed');

            onSnapshot(q, (snapshot) => {
                let postsHtml = '';
                snapshot.forEach(doc => {
                    const post = doc.data();
                    const date = post.timestamp ? new Date(post.timestamp.seconds * 1000).toLocaleString() : 'Just now';
                    // Use substring for display as full IDs are long
                    const displayUserId = post.userId ? `User: ${post.userId.substring(0, 8)}...` : 'Anonymous';

                    postsHtml += `
                        <div class="bg-white p-5 rounded-lg shadow-md border border-gray-100 mb-4 transition hover:shadow-lg">
                            <h4 class="text-xl font-bold text-gray-900 mb-2">${post.title}</h4>
                            <p class="text-gray-700 whitespace-pre-wrap">${post.content}</p>
                            <div class="mt-3 pt-2 border-t border-gray-100 flex justify-between items-center text-xs text-gray-500">
                                <span>Posted by: <span class="font-mono text-primary font-semibold">${displayUserId}</span></span>
                                <span>${date}</span>
                            </div>
                        </div>
                    `;
                });
                feedElement.innerHTML = postsHtml || '<p class="text-center text-gray-500 p-8">No posts yet. Be the first to start a discussion!</p>';
            }, (error) => {
                console.error("Error fetching forum posts:", error);
                feedElement.innerHTML = `<p class="text-center text-red-500 p-8">Error loading forum feed.</p>`;
            });
        }

        // New function to submit a post
        async function submitPost(event) {
            event.preventDefault();
            
            const postBtn = document.getElementById('post-submit-btn');
            postBtn.disabled = true; // Disable button immediately

            if (!db || !userId) {
                alertModal('Authentication required to post.', 'error');
                postBtn.disabled = false;
                return;
            }

            const titleInput = document.getElementById('post-title');
            const contentInput = document.getElementById('post-content');
            const title = titleInput.value.trim();
            const content = contentInput.value.trim();

            if (!title || !content) {
                alertModal('Please fill out both the title and content.', 'error');
                postBtn.disabled = false;
                return;
            }
            
            const postsColRef = collection(db, 'artifacts', appId, 'public', 'data', 'forum_posts');

            try {
                await addDoc(postsColRef, {
                    title: title,
                    content: content,
                    userId: userId,
                    timestamp: serverTimestamp(),
                    commentsCount: 0 
                });

                // Clear the form
                titleInput.value = '';
                contentInput.value = '';
                alertModal('Post submitted successfully!', 'success');

            } catch (error) {
                console.error("Error submitting post:", error);
                alertModal(`Failed to submit post: ${error.message}`, 'error');
            } finally {
                 postBtn.disabled = false; // Re-enable button
            }
        }
        
        // Custom Modal UI function (replaces alert() and confirm())
        function alertModal(message, type) {
            const modal = document.getElementById('customAlertModal');
            const messageEl = document.getElementById('alertMessage');
            const headerEl = document.getElementById('alertHeader');
            const iconEl = document.getElementById('alertIcon');
            
            messageEl.textContent = message;
            
            // Reset classes
            const headerDiv = modal.querySelector('.modal-content-header');
            headerDiv.classList.remove('bg-primary', 'bg-green-500', 'bg-red-500');

            // Set styles based on type
            let headerText = 'Notification';
            let colorClass = 'bg-primary';
            let iconSvg = '';

            if (type === 'success') {
                headerText = 'Success';
                colorClass = 'bg-green-500';
                iconSvg = `<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
            } else if (type === 'error') {
                headerText = 'Error';
                colorClass = 'bg-red-500';
                iconSvg = `<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
            } else {
                colorClass = 'bg-primary';
                iconSvg = `<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`;
            }

            headerEl.textContent = headerText;
            iconEl.innerHTML = iconSvg;
            headerDiv.classList.add(colorClass);

            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 3000); // Auto-hide after 3 seconds
        }

        // Attach submitPost to the global window object for the form
        window.submitPost = submitPost;
        window.alertModal = alertModal; 
    </script>

    <!-- Header & Navigation -->
    <header class="sticky top-0 bg-white shadow-lg z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <!-- Logo & Title -->
            <div class="flex items-center space-x-3">
                <img
                    src="https://placehold.co/50x50/B425AA/ffffff?text=C+"
                    alt="Cognitio+ Logo"
                    class="h-10 w-10 rounded-full shadow-md"
                />
                <h1 class="text-2xl font-bold text-primary">Paraprofessional Hub</h1>
            </div>
            
            <!-- User Status & Action Buttons -->
            <div class="flex items-center space-x-4 text-sm">
                <div class="hidden md:block text-right">
                    <p id="auth-status" class="font-medium text-gray-700">Connecting...</p>
                    <p id="user-id-display" class="text-xs text-gray-500 truncate">Loading User...</p>
                </div>
                <a href="#resources" class="hidden sm:block px-4 py-2 bg-accent text-gray-900 rounded-lg font-semibold hover:bg-yellow-400 transition duration-150 shadow">
                    Resources
                </a>
                <!-- Updated link to scroll to the new forum section -->
                <a href="#forum" class="px-4 py-2 bg-primary text-white rounded-lg font-semibold hover:bg-primary-light transition duration-150 shadow">
                    Community Forum
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="pt-8">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">

            <!-- Hero Section / Welcome Banner -->
            <section class="mb-12 bg-white shadow-xl rounded-2xl p-6 md:p-12 border border-primary-light/20">
                <div class="text-center">
                    <p class="text-xl font-semibold text-gray-600 mb-2">Welcome Back,</p>
                    <h2 class="text-4xl md:text-5xl font-extrabold text-gray-900 leading-tight">
                        Your Central Hub for Mental Health and Well-Being Paraprofessional Support
                    </h2>
                    <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-500">
                        Access continuous professional development, essential references, and real-time community support for your practice.
                    </p>
                </div>
            </section>

            <!-- Dashboard Overview: Status & Quick Links -->
            <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                
                <!-- Community Status (Firestore Demo) -->
                <div id="community" class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-primary">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">Peers Online Status</h3>
                    <div id="hub-status-text" class="text-gray-700">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-primary inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Loading real-time status...
                    </div>
                    <a href="#forum" class="mt-4 block text-xs text-primary-light hover:underline font-medium">Jump to Discussion &rarr;</a>
                </div>

                <!-- Quick Link: Module Review -->
                <a href="#modules" class="block bg-white p-6 rounded-xl shadow-lg border-l-4 border-accent transition card-hover">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Review Core Modules</h3>
                    <p class="text-gray-500 text-sm">Revisit PFA, Ethics, and Crisis Response content.</p>
                </a>

                <!-- Quick Link: Practicum Log -->
                <div class="block bg-white p-6 rounded-xl shadow-lg border-l-4 border-gray-400">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Practicum & Supervision</h3>
                    <p class="text-gray-500 text-sm">Log your 10 required support sessions and check mentor feedback.</p>
                    <button class="mt-3 text-sm px-3 py-1 bg-gray-200 text-gray-700 rounded-full">Log In (Simulated)</button>
                </div>

            </section>
            
            <!-- IX. Community Forum / Discussion Feed (NEW SECTION) -->
            <section id="forum" class="py-12 mb-12">
                <div class="px-6 md:px-12">
                    <h2 class="section-heading text-3xl md:text-4xl text-primary">IX. Community Forum</h2>
                    <p class="text-center text-lg text-gray-600 mb-10 max-w-3xl mx-auto">
                        Connect with peers, share insights, and discuss case studies in a private, supportive environment.
                    </p>

                    <div class="max-w-3xl mx-auto">
                        <!-- Post Creation Form -->
                        <form id="post-form" class="bg-white p-6 rounded-xl shadow-lg border border-primary-light/30 mb-8" onsubmit="submitPost(event)">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">Start a New Discussion Thread</h3>
                            <input type="text" id="post-title" placeholder="Thread Title (e.g., Question about PFA Step 3)" 
                                   class="w-full p-3 mb-3 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition" required>
                            <textarea id="post-content" rows="4" placeholder="Share your thoughts or ask your question..."
                                      class="w-full p-3 mb-4 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition" required></textarea>
                            <button type="submit" id="post-submit-btn" 
                                    class="w-full py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary-light transition duration-150 shadow-lg disabled:bg-gray-400">
                                Post to Forum
                            </button>
                        </form>

                        <!-- Forum Feed -->
                        <h3 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">Latest Threads</h3>
                        <div id="forum-feed" class="space-y-4">
                            <p class="text-center text-gray-500 p-8">Loading posts...</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VII. Core Competencies & Modules (Refined Section V) -->
            <section id="modules" class="py-12 bg-white rounded-2xl shadow-xl mb-12 border border-gray-200">
                <div class="px-6 md:px-12">
                    <h2 class="section-heading text-3xl md:text-4xl text-primary">VII. Core Competencies & Modules</h2>
                    <p class="text-center text-lg text-gray-600 mb-10 max-w-3xl mx-auto">
                        Your foundational training remains your knowledge base. Select a module to review its learning outcomes and key skills.
                    </p>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                        
                        <!-- Module 1: Foundations of Mental Health and Well-Being -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md transition card-hover">
                            <h3 class="text-lg font-semibold text-primary mb-1">M1: Foundations (3 hrs)</h3>
                            <p class="text-sm text-gray-500">WHO/RA 11036 Context</p>
                            <a href="module1.html" class="mt-3 inline-block text-sm text-primary-light hover:underline font-medium">Review Module &rarr;</a>
                        </div>
        
                        <!-- Module 2: Ethics, Boundaries, and Digital Confidentiality -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md transition card-hover">
                            <h3 class="text-lg font-semibold text-primary mb-1">M2: Ethics & Digital (2 hrs)</h3>
                            <p class="text-sm text-gray-500">Data Privacy & Boundaries</p>
                            <a href="module2.html" class="mt-3 inline-block text-sm text-primary-light hover:underline font-medium">Review Module &rarr;</a>
                        </div>
        
                        <!-- Module 3: Psychological First Aid (Look–Listen–Link) -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md transition card-hover">
                            <h3 class="text-lg font-semibold text-primary mb-1">M3: PFA (3 hrs)</h3>
                            <p class="text-sm text-gray-500">Look–Listen–Link Principles</p>
                            <a href="module3.html" class="mt-3 inline-block text-sm text-primary-light hover:underline font-medium">Review Module &rarr;</a>
                        </div>
                        
                        <!-- Module 4: Core Support and Basic Coping Skills -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md transition card-hover">
                            <h3 class="text-lg font-semibold text-primary mb-1">M4: Core Support (6 hrs)</h3>
                            <p class="text-sm text-gray-500">Communication & Coping Skills</p>
                            <a href="module4.html" class="mt-3 inline-block text-sm text-primary-light hover:underline font-medium">Review Module &rarr;</a>
                        </div>
                        
                        <!-- Module 5: Recognizing and Responding to Crisis -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md transition card-hover">
                            <h3 class="text-lg font-semibold text-primary mb-1">M5: Crisis Response (4 hrs)</h3>
                            <p class="text-sm text-gray-500">Suicide/Acute Distress Signs</p>
                            <a href="module5.html" class="mt-3 inline-block text-sm text-primary-light hover:underline font-medium">Review Module &rarr;</a>
                        </div>
                        
                        <!-- Module 6: Cultural Sensitivity and Community Context -->
                        <div class="bg-gray-50 p-6 rounded-lg shadow-md transition card-hover">
                            <h3 class="text-lg font-semibold text-primary mb-1">M6: Cultural Context (2 hrs)</h3>
                            <p class="text-sm text-gray-500">Inclusivity & Local Adaptation</p>
                            <a href="module6.html" class="mt-3 inline-block text-sm text-primary-light hover:underline font-medium">Review Module &rarr;</a>
                        </div>
                        
                    </div>
                </div>
            </section>

            <!-- VIII. Knowledge Base & Required References (Refined Section IX) -->
            <section id="resources" class="py-12 mb-12">
                <div class="px-6 md:px-12">
                    <h2 class="section-heading text-3xl md:text-4xl">VIII. Knowledge Base & References</h2>
                    <p class="text-center text-lg text-gray-600 mb-10 max-w-3xl mx-auto">
                        Access the core documents, frameworks, and legal references that govern your practice.
                    </p>
                    
                    <div class="max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                        <ul class="space-y-4">
                            <!-- Reference 1 -->
                            <li class="flex items-start space-x-3">
                                <span class="text-accent font-bold pt-1">1.</span>
                                <div>
                                    <p class="font-medium text-gray-800">WHO mhGAP Intervention Guide: Version 3.0</p>
                                    <a href="#" class="text-sm text-primary hover:text-primary-light transition hover:underline">View Source (External Link)</a>
                                </div>
                            </li>
                            <!-- Reference 2 -->
                            <li class="flex items-start space-x-3">
                                <span class="text-accent font-bold pt-1">2.</span>
                                <div>
                                    <p class="font-medium text-gray-800">Philippine Mental Health Act (RA 11036)</p>
                                    <a href="#" class="text-sm text-primary hover:text-primary-light transition hover:underline">View Law &rarr;</a>
                                </div>
                            </li>
                            <!-- Reference 3 -->
                            <li class="flex items-start space-x-3">
                                <span class="text-accent font-bold pt-1">3.</span>
                                <div>
                                    <p class="font-medium text-gray-800">Cognitio+ Comprehensive Guidebook for Paraprofessionals</p>
                                    <a href="https://cognitioplus.aiwaapp.live/guidebook" target="_blank" class="text-sm text-primary hover:text-primary-light transition hover:underline">Open Guidebook &rarr;</a>
                                </div>
                            </li>
                            <!-- Reference 4 (Data Privacy) -->
                            <li class="flex items-start space-x-3">
                                <span class="text-accent font-bold pt-1">4.</span>
                                <div>
                                    <p class="font-medium text-gray-800">Data Privacy Act (RA 10173) Summary for Practice</p>
                                    <a href="#" class="text-sm text-primary hover:text-primary-light transition hover:underline">Read Summary &rarr;</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12 py-10">
        <div class="container mx-auto px-4 text-center">
            <p>&copy; 2025 Cognitio+ Paraprofessional Hub. All Rights Reserved.</p>
            <p class="mt-2 text-sm text-gray-400">
                Contact: <a href="mailto:hellot@cognitioplus.com" class="text-accent hover:text-yellow-300 transition">hellot@cognitioplus.com</a>
            </p>
        </div>
    </footer>
    
    <!-- Custom Alert Modal Structure -->
    <div id="customAlertModal" class="fixed inset-0 z-[100] hidden items-center justify-center pointer-events-none">
        <div class="bg-white rounded-lg shadow-xl overflow-hidden max-w-sm w-full m-4 transform transition-all duration-300 ease-out translate-y-0 opacity-100">
            <div class="modal-content-header bg-primary p-4 flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <div id="alertIcon"></div>
                    <h4 id="alertHeader" class="text-white font-bold">Notification</h4>
                </div>
            </div>
            <div class="p-4">
                <p id="alertMessage" class="text-gray-700"></p>
                <!-- This button is hidden but available if manual closure were needed -->
                <button onclick="document.getElementById('customAlertModal').classList.add('hidden')" class="hidden">Close</button>
            </div>
        </div>
    </div>

    <style>
    /* CSS for the hidden modal (pointer-events-none ensures clicks go through when hidden) */
    #customAlertModal.hidden {
        display: none;
    }
    #customAlertModal {
        display: flex; /* Always use flex when visible */
    }
    </style>
</body>
</html>
